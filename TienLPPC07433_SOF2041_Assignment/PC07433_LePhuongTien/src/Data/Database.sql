CREATE DATABASE EduSys
GO
USE EduSys
GO

-- CREATE TABLE
CREATE TABLE CHUYENDE (
	MACD NCHAR(5) PRIMARY KEY NOT NULL,
	TENCD  NVARCHAR(50)  NOT NULL , 
	HOCPHI FLOAT NOT NULL,
	THOILUONG INT NOT NULL,
	HINH NVARCHAR(50)  NOT NULL ,
	MOTA NVARCHAR(255)  NOT NULL
)

CREATE TABLE NHANVIEN (
	MANV NVARCHAR(20) NOT NULL PRIMARY KEY,
	MATKHAU NVARCHAR(50) NOT NULL,
	HOTEN NVARCHAR(50) NOT NULL,
	VAITRO BIT NOT NULL DEFAULT 1,
)

 CREATE TABLE KHOAHOC (
	MAKH INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
	MACD NCHAR(5) NOT NULL FOREIGN KEY REFERENCES CHUYENDE(MACD) ON DELETE NO ACTION ON UPDATE CASCADE,
	HOCPHI FLOAT NOT NULL DEFAULT 0,
	THOILUONG INT NOT NULL DEFAULT 0,
	NGAYKG	DATE NOT NULL,
	GHICHU NVARCHAR(50) NULL,
	MANV NVARCHAR(20) NOT NULL FOREIGN KEY REFERENCES NHANVIEN(MANV) ON DELETE NO ACTION ON UPDATE CASCADE,
	NGAYTAO DATE  NOT NULL DEFAULT GETDATE(),
	CHECK(HOCPHI >=0 AND THOILUONG >0)
 )
 CREATE TABLE NGUOIHOC (
	MANH NCHAR(7) NOT NULL PRIMARY KEY,
	HOTEN NVARCHAR(50) NOT NULL,
	GIOITINH BIT NOT NULL DEFAULT 1,
	NGAYSINH DATE NOT NULL,
	EMAIL NVARCHAR(50) NOT NULL,
	DIENTHOAI NVARCHAR(24) NOT NULL,
	GHICHU NVARCHAR(255) NULL,
	MANV NVARCHAR(20) NOT NULL FOREIGN KEY REFERENCES NHANVIEN(MANV) ON DELETE NO ACTION ON UPDATE CASCADE,
	NGAYDK DATE NOT NULL DEFAULT GETDATE(),
)
CREATE TABLE HOCVIEN (
	MAHV INT IDENTITY(1,1) NOT NULL PRIMARY KEY,
	MAKH INT NOT NULL FOREIGN KEY REFERENCES KHOAHOC(MAKH) ON DELETE CASCADE,
	MANH NCHAR(7) NOT NULL FOREIGN KEY REFERENCES NGUOIHOC(MANH) ON DELETE NO ACTION ON UPDATE CASCADE,
	DIEM FLOAT NOT NULL DEFAULT -1,
)

-- INSERT DATA

INSERT CHUYENDE  VALUES (N'JAV01', N'Lập trình Java cơ bản', 250, 90, N'GAME.png', N'JAV01 - Lập trình Java cơ bản')
INSERT CHUYENDE  VALUES (N'JAV02', N'Lập trình Java nâng cao', 300, 90, N'HTCS.jpg', N'JAV02 - Lập trình Java nâng cao')
INSERT CHUYENDE  VALUES (N'JAV03', N'Lập trình mạng với Java', 200, 70, N'INMA.jpg', N'JAV03 - Lập trình mạng với Java')
INSERT CHUYENDE  VALUES  (N'JAV04', N'Lập trình desktop với Swing', 200, 70, N'ADAV.jpg', N'JAV04 - Lập trình desktop với Swing')
INSERT CHUYENDE  VALUES (N'PRO01', N'Dự án với công nghệ MS.NET MVC', 300, 90, N'MOWE.png', N'PRO01 - Dự án với công nghệ MS.NET MVC')
INSERT CHUYENDE  VALUES  (N'PRO02', N'Dự án với công nghệ Spring MVC', 300, 90, N'Subject.png', N'PRO02 - Dự án với công nghệ Spring MVC')
INSERT CHUYENDE  VALUES  (N'PRO03', N'Dự án với công nghệ Servlet/JSP', 300, 90, N'GAME.png', N'PRO03 - Dự án với công nghệ Servlet/JSP')
INSERT CHUYENDE  VALUES  (N'PRO04', N'Dự án với AngularJS & WebAPI', 300, 90, N'HTCS.jpg', N'PRO04 - Dự án với AngularJS & WebAPI')
INSERT CHUYENDE  VALUES  (N'PRO05', N'Dự án với Swing & JDBC', 300, 90, N'INMA.jpg', N'PRO05 - Dự án với Swing & JDBC')
INSERT CHUYENDE  VALUES  (N'PRO06', N'Dự án với WindowForm', 300, 90, N'LAYO.jpg', N'PRO06 - Dự án với WindowForm')
INSERT CHUYENDE  VALUES  (N'RDB01', N'Cơ sở dữ liệu SQL Server', 100, 50, N'MOWE.png', N'RDB01 - Cơ sở dữ liệu SQL Server')
INSERT CHUYENDE  VALUES  (N'RDB02', N'Lập trình JDBC', 150, 60, N'Subject.png', N'RDB02 - Lập trình JDBC')
INSERT CHUYENDE  VALUES  (N'RDB03', N'Lập trình cơ sở dữ liệu Hibernate', 250, 80, N'GAME.png', N'RDB03 - Lập trình cơ sở dữ liệu Hibernate')
INSERT CHUYENDE  VALUES  (N'SER01', N'Lập trình web với Servlet/JSP', 350, 100, N'HTCS.jpg', N'SER01 - Lập trình web với Servlet/JSP')
INSERT CHUYENDE  VALUES  (N'SER02', N'Lập trình Spring MVC', 400, 110, N'INMA.jpg', N'SER02 - Lập trình Spring MVC')
INSERT CHUYENDE  VALUES  (N'SER03', N'Lập trình MS.NET MVC', 400, 110, N'LAYO.jpg', N'SER03 - Lập trình MS.NET MVC')
INSERT CHUYENDE  VALUES  (N'SER04', N'Xây dựng Web API với Spring MVC & ASP.NET MVC', 200, 70, N'MOWE.png', N'SER04 - Xây dựng Web API với Spring MVC & ASP.NET MVC')
INSERT CHUYENDE  VALUES  (N'WEB01', N'Thiết kế web với HTML và CSS', 200, 70, N'Subject.png', N'WEB01 - Thiết kế web với HTML và CSS')
INSERT CHUYENDE  VALUES  (N'WEB02', N'Thiết kế web với Bootstrap', 0, 40, N'GAME.png', N'WEB02 - Thiết kế web với Bootstrap')
INSERT CHUYENDE  VALUES  (N'WEB03', N'Lập trình front-end với JavaScript và jQuery', 150, 60, N'HTCS.jpg', N'WEB03 - Lập trình front-end với JavaScript và jQuery')
INSERT CHUYENDE  VALUES  (N'WEB04', N'Lập trình AngularJS', 250, 80, N'INMA.jpg', N'WEB04 - Lập trình AngularJS')


INSERT NhanVien VALUES (N'LongNDH', N'songlong', N'Nguyễn Đình Hoàng Long', 0)
INSERT NhanVien VALUES (N'LongNDT', N'songlong', N'Nguyễn Đình Thiên Long', 0)
INSERT NhanVien VALUES (N'NghiemN', N'songlong', N'Nguyễn Nghiệm', 1)
INSERT NhanVien VALUES (N'NoPT', N'123456', N'Phạm Thị Nở', 0)
INSERT NhanVien VALUES (N'PheoNC', N'123456', N'Nguyễn Chí Phèo', 0)
INSERT NhanVien VALUES (N'TeoNV', N'songlong', N'Nguyễn Văn Tèo', 1)
INSERT NhanVien VALUES (N'ThaoLTH', N'songlong', N'Lê Thị Hương Thảo', 0)

-- Bảng KHOAHOC
SET IDENTITY_INSERT KhoaHoc off;
INSERT KhoaHoc VALUES ( N'PRO02', 300, 90, CAST(0xBF3D0B00 AS Date), N'', N'TeoNV', CAST(0xB53D0B00 AS Date))
INSERT KhoaHoc VALUES ( N'JAV04', 300, 90, CAST(0xDF3D0B00 AS Date), N'', N'TeoNV', CAST(0xB53D0B00 AS Date))
INSERT KhoaHoc VALUES ( N'JAV04', 100, 50, CAST(0xFC3D0B00 AS Date), N'', N'TeoNV', CAST(0xB53D0B00 AS Date))
INSERT KhoaHoc VALUES ( N'JAV04', 250, 80, CAST(0x103E0B00 AS Date), N'', N'TeoNV', CAST(0xB53D0B00 AS Date))
INSERT KhoaHoc VALUES ( N'PRO04', 300, 90, CAST(0xD3400B00 AS Date), N'', N'TeoNV', CAST(0xE6400B00 AS Date))
INSERT KhoaHoc VALUES ( N'JAV01', 300, 90, CAST(0xF6400B00 AS Date), N'Lập trình Java cơ bản', N'TeoNV', CAST(0x0A410B00 AS Date))
INSERT KhoaHoc VALUES ( N'JAV02', 300, 90, CAST(0xF6400B00 AS Date), N'Lập trình Java nâng cao', N'TeoNV', CAST(0x0A410B00 AS Date))
INSERT KhoaHoc VALUES ( N'JAV03', 200, 70, CAST(0xF6400B00 AS Date), N'Lập trình mạng với Java', N'TeoNV', CAST(0x0A410B00 AS Date))
INSERT KhoaHoc VALUES ( N'JAV04', 200, 70, CAST(0xF6400B00 AS Date), N'Lập trình ứng dụng Desktop với Java', N'TeoNV', CAST(0x0A410B00 AS Date))
INSERT KhoaHoc VALUES ( N'PRO01', 300, 90, CAST(0xF6400B00 AS Date), N'Lập trình .NET MVC', N'TeoNV', CAST(0x0A410B00 AS Date))
INSERT KhoaHoc VALUES ( N'PRO02', 300, 90, CAST(0xF6400B00 AS Date), N'Lập trình Spring MVC', N'TeoNV', CAST(0x0A410B00 AS Date))
INSERT KhoaHoc VALUES ( N'PRO03', 300, 90, CAST(0xF6400B00 AS Date), N'Làm dự án với Servlet và JSP', N'TeoNV', CAST(0x0A410B00 AS Date))
INSERT KhoaHoc VALUES ( N'PRO04', 300, 90, CAST(0xF6400B00 AS Date), N'Làm dự án với REST API và AngularJS', N'TeoNV', CAST(0x0A410B00 AS Date))
INSERT KhoaHoc VALUES ( N'JAV01', 300, 90, CAST(0xF4400B00 AS Date), N'Lập trình Java cơ bản', N'TeoNV', CAST(0x0A410B00 AS Date))
INSERT KhoaHoc VALUES ( N'JAV01', 250, 90, CAST(0xF2400B00 AS Date), N'Lập trình Java cơ bản', N'TeoNV', CAST(0x0A410B00 AS Date))


INSERT NguoiHoc VALUES (N'PS01638', N'LỮ HUY CƯỜNG',0, CAST(0xAF170B00 AS Date), N'0928768265', N'PS01638@fpt.edu.vn', N'0928768265 - LỮ HUY CƯỜNG', N'TeoNV', CAST(0xAF170B00 AS Date))
INSERT NguoiHoc VALUES (N'PS02037', N'ĐỖ VĂN MINH',1, CAST(0xC6190B00 AS Date), N'0968095685', N'PS02037@fpt.edu.vn', N'0968095685 - ĐỖ VĂN MINH', N'PheoNC', CAST(0xC6190B00 AS Date))
INSERT NguoiHoc VALUES (N'PS02771', N'NGUYỄN TẤN HIẾU',1, CAST(0x2E220B00 AS Date),  N'0927594734', N'PS02771@fpt.edu.vn', N'0927594734 - NGUYỄN TẤN HIẾU', N'PheoNC', CAST(0x2E220B00 AS Date))
INSERT NguoiHoc VALUES (N'PS02867', N'NGUYỄN HỮU TRÍ', 1,CAST(0xEB200B00 AS Date),  N'0946984711', N'PS02867@fpt.edu.vn', N'0946984711 - NGUYỄN HỮU TRÍ', N'TeoNV', CAST(0xEB200B00 AS Date))
INSERT NguoiHoc VALUES (N'PS02930', N'TRẦN VĂN NAM', 1,CAST(0xA1240B00 AS Date),  N'0924774498', N'PS02930@fpt.edu.vn', N'0924774498 - TRẦN VĂN NAM', N'TeoNV', CAST(0xA1240B00 AS Date))
INSERT NguoiHoc VALUES (N'PS02979', N'ĐOÀN TRẦN NHẬT VŨ',1, CAST(0x671C0B00 AS Date),  N'0912374818', N'PS02979@fpt.edu.vn', N'0912374818 - ĐOÀN TRẦN NHẬT VŨ', N'TeoNV', CAST(0x671C0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS02983', N'NGUYỄN HOÀNG THIÊN PHƯỚC', 1,CAST(0x681A0B00 AS Date),  N'0912499836', N'PS02983@fpt.edu.vn', N'0912499836 - NGUYỄN HOÀNG THIÊN PHƯỚC', N'PheoNC', CAST(0x681A0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS02988', N'HỒ HỮU HẬU', 1,CAST(0x311A0B00 AS Date),  N'0924984876', N'PS02988@fpt.edu.vn', N'0924984876 - HỒ HỮU HẬU', N'PheoNC', CAST(0x311A0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03031', N'PHAN TẤN VIỆT', 1,CAST(0x21160B00 AS Date),  N'0924832716', N'PS03031@fpt.edu.vn', N'0924832716 - PHAN TẤN VIỆT', N'PheoNC', CAST(0x21160B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03046', N'NGUYỄN CAO PHƯỚC', 1,CAST(0xDE150B00 AS Date),  N'0977117727', N'PS03046@fpt.edu.vn', N'0977117727 - NGUYỄN CAO PHƯỚC', N'PheoNC', CAST(0xDE150B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03080', N'HUỲNH THANH HUY', 1,CAST(0x701C0B00 AS Date),  N'0916436052', N'PS03080@fpt.edu.vn', N'0916436052 - HUỲNH THANH HUY', N'PheoNC', CAST(0x701C0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03088', N'NGUYỄN HOÀNG TRUNG', 1,CAST(0x24180B00 AS Date),  N'0938101529', N'PS03088@fpt.edu.vn', N'0938101529 - NGUYỄN HOÀNG TRUNG', N'PheoNC', CAST(0x24180B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03096', N'ĐOÀN HỮU KHANG',1, CAST(0xAB1B0B00 AS Date),  N'0945196719', N'PS03096@fpt.edu.vn', N'0945196719 - ĐOÀN HỮU KHANG', N'PheoNC', CAST(0xAB1B0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03104', N'LÊ THÀNH PHƯƠNG', 0,CAST(0x3E1A0B00 AS Date),  N'0922948096', N'PS03104@fpt.edu.vn', N'0922948096 - LÊ THÀNH PHƯƠNG', N'TeoNV', CAST(0x3E1A0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03120', N'PHẠM NGỌC NHẬT TRƯỜNG', 1,CAST(0x48230B00 AS Date),  N'0994296169', N'PS03120@fpt.edu.vn', N'0994296169 - PHẠM NGỌC NHẬT TRƯỜNG', N'PheoNC', CAST(0x48230B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03130', N'ĐẶNG BẢO VIỆT', 1,CAST(0xEF150B00 AS Date),  N'0917749344', N'PS03130@fpt.edu.vn', N'0917749344 - ĐẶNG BẢO VIỆT', N'PheoNC', CAST(0xEF150B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03134', N'LÊ DUY BẢO',1, CAST(0x2E1F0B00 AS Date),  N'0926714368', N'PS03134@fpt.edu.vn', N'0926714368 - LÊ DUY BẢO', N'PheoNC', CAST(0x2E1F0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03172', N'NGUYỄN ANH TUẤN', 1,CAST(0xCA180B00 AS Date),  N'0920020472', N'PS03172@fpt.edu.vn', N'0920020472 - NGUYỄN ANH TUẤN', N'PheoNC', CAST(0xCA180B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03202', N'PHAN QUỐC QUI',1, CAST(0x741E0B00 AS Date),  N'0930649274', N'PS03202@fpt.edu.vn', N'0930649274 - PHAN QUỐC QUI', N'PheoNC', CAST(0x741E0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03203', N'ĐẶNG LÊ QUANG VINH', 1,CAST(0xC4150B00 AS Date),  N'0920197355', N'PS03203@fpt.edu.vn', N'0920197355 - ĐẶNG LÊ QUANG VINH', N'PheoNC', CAST(0xC4150B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03205', N'NGUYỄN MINH SANG', 1,CAST(0x5E1D0B00 AS Date),  N'0967006218', N'PS03205@fpt.edu.vn', N'0967006218 - NGUYỄN MINH SANG', N'PheoNC', CAST(0x5E1D0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03222', N'TRẦM MINH MẪN', 1,CAST(0xE71F0B00 AS Date),  N'0911183649', N'PS03222@fpt.edu.vn', N'0911183649 - TRẦM MINH MẪN', N'PheoNC', CAST(0xE71F0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03230', N'NGUYỄN PHẠM MINH HÂN', 1,CAST(0x26250B00 AS Date),  N'0983469892', N'PS03230@fpt.edu.vn', N'0983469892 - NGUYỄN PHẠM MINH HÂN', N'PheoNC', CAST(0x26250B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03233', N'LƯU KIM HOÀNG DUY',1, CAST(0x0B1F0B00 AS Date),  N'0938357735', N'PS03233@fpt.edu.vn', N'0938357735 - LƯU KIM HOÀNG DUY', N'PheoNC', CAST(0x0B1F0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03251', N'TRẦN QUANG VŨ', 1,CAST(0x4C240B00 AS Date),  N'0914531913', N'PS03251@fpt.edu.vn', N'0914531913 - TRẦN QUANG VŨ', N'PheoNC', CAST(0x4C240B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03304', N'BÙI NGỌC THUẬN',1, CAST(0xFE1C0B00 AS Date),  N'0999794115', N'PS03304@fpt.edu.vn', N'0999794115 - BÙI NGỌC THUẬN', N'PheoNC', CAST(0xFE1C0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03306', N'HỒ VĂN HÀNH', 1,CAST(0x06190B00 AS Date),  N'0912277868', N'PS03306@fpt.edu.vn', N'0912277868 - HỒ VĂN HÀNH', N'PheoNC', CAST(0x06190B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03308', N'TRẦN VIẾT HÙNG', 1, CAST(0xD0220B00 AS Date), N'0916050164', N'PS03308@fpt.edu.vn', N'0916050164 - TRẦN VIẾT HÙNG', N'PheoNC', CAST(0xD0220B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03325', N'NGUYỄN HOÀNG MINH ĐỨC', 1,CAST(0xAB1F0B00 AS Date),  N'0912234437', N'PS03325@fpt.edu.vn', N'0912234437 - NGUYỄN HOÀNG MINH ĐỨC', N'PheoNC', CAST(0xAB1F0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03346', N'PHAN THANH PHONG',1, CAST(0xD7150B00 AS Date),  N'0937891282', N'PS03346@fpt.edu.vn', N'0937891282 - PHAN THANH PHONG', N'PheoNC', CAST(0xD7150B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03383', N'TRẦN VŨ LUÂN', 1,CAST(0x8E210B00 AS Date),  N'0962030316', N'PS03383@fpt.edu.vn', N'0962030316 - TRẦN VŨ LUÂN', N'PheoNC', CAST(0x8E210B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03389', N'VŨ ĐỨC TUẤN', 1,CAST(0x411A0B00 AS Date),  N'0911637415', N'PS03389@fpt.edu.vn', N'0911637415 - VŨ ĐỨC TUẤN', N'PheoNC', CAST(0x411A0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03410', N'TRẦN  NHẠT', 1,CAST(0x3C190B00 AS Date),  N'0946219377', N'PS03410@fpt.edu.vn', N'0946219377 - TRẦN  NHẠT', N'PheoNC', CAST(0x3C190B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03411', N'TRƯƠNG THÀNH ĐẠT', 1,CAST(0x3F1B0B00 AS Date),  N'0991509408', N'PS03411@fpt.edu.vn', N'0991509408 - TRƯƠNG THÀNH ĐẠT', N'PheoNC', CAST(0x3F1B0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03425', N'TÔ VĂN NĂNG', 1,CAST(0x6E190B00 AS Date),  N'0915134551', N'PS03425@fpt.edu.vn', N'0915134551 - TÔ VĂN NĂNG', N'PheoNC', CAST(0x6E190B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03454', N'NGUYỄN NHẬT VĨNH', 1,CAST(0x57230B00 AS Date),  N'0917886371', N'PS03454@fpt.edu.vn', N'0917886371 - NGUYỄN NHẬT VĨNH', N'PheoNC', CAST(0x57230B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03472', N'NGUYỄN VĂN HUY', 1,CAST(0xD8150B00 AS Date),  N'0960620997', N'PS03472@fpt.edu.vn', N'0960620997 - NGUYỄN VĂN HUY', N'PheoNC', CAST(0xD8150B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03488', N'NGUYỄN NHƯ NGỌC',0, CAST(0x651D0B00 AS Date),  N'0912880267', N'PS03488@fpt.edu.vn', N'0912880267 - NGUYỄN NHƯ NGỌC', N'PheoNC', CAST(0x651D0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03530', N'PHẠM THÀNH TÂM', 1,CAST(0x4D240B00 AS Date),  N'0918161783', N'PS03530@fpt.edu.vn', N'0918161783 - PHẠM THÀNH TÂM', N'PheoNC', CAST(0x4D240B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03553', N'ĐINH TẤN CÔNG',1, CAST(0xEA240B00 AS Date),  N'0918182551', N'PS03553@fpt.edu.vn', N'0918182551 - ĐINH TẤN CÔNG', N'PheoNC', CAST(0xEA240B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03561', N'LÊ MINH ĐIỀN', 1,CAST(0xE91C0B00 AS Date),  N'0948199564', N'PS03561@fpt.edu.vn', N'0948199564 - LÊ MINH ĐIỀN', N'PheoNC', CAST(0xE91C0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03596', N'NGUYỄN THANH HIỀN', 1,CAST(0xED170B00 AS Date),  N'0910545901', N'PS03596@fpt.edu.vn', N'0910545901 - NGUYỄN THANH HIỀN', N'PheoNC', CAST(0xED170B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03603', N'LÊ PHẠM KIM THANH', 0,CAST(0x501C0B00 AS Date),  N'0924696779', N'PS03603@fpt.edu.vn', N'0924696779 - LÊ PHẠM KIM THANH', N'PheoNC', CAST(0x501C0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03610', N'TRẦN ĐÌNH TRƯỜNG',1, CAST(0xF41C0B00 AS Date),  N'0941528106', N'PS03610@fpt.edu.vn', N'0941528106 - TRẦN ĐÌNH TRƯỜNG', N'PheoNC', CAST(0xF41C0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03614', N'NGUYỄN VĂN SÁU',1, CAST(0x37160B00 AS Date),  N'0940711328', N'PS03614@fpt.edu.vn', N'0940711328 - NGUYỄN VĂN SÁU', N'PheoNC', CAST(0x37160B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03618', N'PHÍ ĐÌNH VIỆT HÙNG',1, CAST(0xA91F0B00 AS Date),  N'0939020097', N'PS03618@fpt.edu.vn', N'0939020097 - PHÍ ĐÌNH VIỆT HÙNG', N'PheoNC', CAST(0xA91F0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03638', N'PHẠM NHẬT MINH', 1,CAST(0x86200B00 AS Date),  N'0927771672', N'PS03638@fpt.edu.vn', N'0927771672 - PHẠM NHẬT MINH', N'PheoNC', CAST(0x86200B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03640', N'LƯU THANH NGỌC',0, CAST(0x591B0B00 AS Date),  N'0918358164', N'PS03640@fpt.edu.vn', N'0918358164 - LƯU THANH NGỌC', N'PheoNC', CAST(0x591B0B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03662', N'NGUYỄN CAO NGỌC LỢI', 1,CAST(0x34160B00 AS Date),  N'0930260679', N'PS03662@fpt.edu.vn', N'0930260679 - NGUYỄN CAO NGỌC LỢI', N'PheoNC', CAST(0x34160B00 AS Date))
INSERT NguoiHoc VALUES (N'PS03674', N'TRẦN TUẤN ANH', 1, CAST(0xF41E0B00 AS Date), N'0914082094', N'PS03674@fpt.edu.vn', N'0914082094 - TRẦN TUẤN ANH', N'PheoNC', CAST(0xF41E0B00 AS Date))
INSERT HocVien VALUES ( 2, N'PS01638', 5)
INSERT HocVien VALUES ( 2, N'PS02988', 3)
INSERT HocVien VALUES ( 3, N'PS02037', 9)
INSERT HocVien VALUES ( 3, N'PS02771', 7)
INSERT HocVien VALUES ( 3, N'PS02867', 2)
INSERT HocVien VALUES ( 3, N'PS02930', 1)
INSERT HocVien VALUES ( 1, N'PS01638', 8)
INSERT HocVien VALUES ( 1, N'PS02037', 9)
INSERT HocVien VALUES ( 1, N'PS02867', 3)
INSERT HocVien VALUES ( 1, N'PS02930', 7)
INSERT HocVien VALUES ( 1, N'PS02771', 8)
INSERT HocVien VALUES ( 1, N'PS02979', 4)
INSERT HocVien VALUES ( 1, N'PS02983', 6)
INSERT HocVien VALUES ( 1, N'PS02988', 0)
INSERT HocVien VALUES ( 1, N'PS03031', 0)
INSERT HocVien VALUES ( 1, N'PS03046', 0)
INSERT HocVien VALUES ( 1, N'PS03080', 0)
INSERT HocVien VALUES ( 1, N'PS03088', 0)
INSERT HocVien VALUES ( 1, N'PS03096', 0)
INSERT HocVien VALUES ( 1, N'PS03104', 0)
INSERT HocVien VALUES ( 1, N'PS03120', 0)
INSERT HocVien VALUES ( 1, N'PS03130', 0)
INSERT HocVien VALUES ( 3, N'PS02983', 5)
INSERT HocVien VALUES ( 3, N'PS03096', 9)
INSERT HocVien VALUES ( 3, N'PS03120', 6)
INSERT HocVien VALUES ( 3, N'PS03046', 7)
INSERT HocVien VALUES ( 5, N'PS01638', 5)
INSERT HocVien VALUES ( 5, N'PS02771', 9)
INSERT HocVien VALUES ( 5, N'PS02037', 0)
INSERT HocVien VALUES ( 4, N'PS01638', 0)
INSERT HocVien VALUES ( 4, N'PS03031', 0)
INSERT HocVien VALUES ( 4, N'PS02979', 0)


-- Create proc

-- Report : MANH - HOTEN - DIEM
CREATE PROC sp_Bangdiem
	@MAKH INT
AS BEGIN
	SELECT 
		nh.MANH,
		nh.HOTEN,
		hv.DIEM
	FROM HOCVIEN hv INNER JOIN NGUOIHOC nh ON hv.MANH = nh.MANH
	WHERE hv.MAKH = @MAKH
	ORDER BY hv.DIEM DESC
END
GO

-- Report : TENCD - SOHV - DIEMTN - DIEMCN - DIEMTB
CREATE PROC sp_Thongkediem
AS BEGIN 
	SELECT 
		TENCD AS TENCHUYENDE,
		COUNT(MAHV) AS SOHV,
		MIN(DIEM) AS DIEMTN,
		MAX(DIEM) AS DIEMCN,
		AVG(DIEM) AS DIEMTB
	FROM KHOAHOC kh
		INNER JOIN HOCVIEN hv ON kh.MAKH = hv.MAKH
		INNER JOIN CHUYENDE cd ON cd.MACD = kh.MACD
	GROUP BY TENCD
END
GO

-- Report : TENCD - SOHV - DOANHTHU - DTHUTN - DTHUCN - DTHUTB
CREATE PROC sp_Thongkedoanhthu
	@Year INT
AS BEGIN
	SELECT
		TENCD AS TENCHUYENDE,
		COUNT(DISTINCT kh.MAKH) AS SOKH,
		COUNT(hv.MAHV) AS SOHV,
		SUM(kh.HOCPHI) AS DOANHTHU,
		MIN(kh.HOCPHI) AS DTHUTN,
		MAX(kh.HOCPHI) AS DTHUCN,
		AVG(kh.HOCPHI) AS HPHITB
	FROM KHOAHOC kh
		INNER JOIN HOCVIEN hv ON kh.MAKH = hv.MAKH
		INNER JOIN CHUYENDE cd ON cd.MACD = kh.MACD
	WHERE YEAR(NGAYKG) = @Year
	GROUP BY TENCD
END
GO

-- Report : NAM - SOLUONG - NGHDAUTIEN - NGHCUOICUNG
CREATE PROC sp_Thongkenguoihoc
AS BEGIN
	SELECT 
		YEAR(NGAYDK) AS NAM,
		COUNT(*) AS SOLUONG,
		MIN(NGAYDK) AS DAUTIEN,
		MAX(NGAYDK) AS CUOICUNG
	FROM NGUOIHOC
	GROUP BY YEAR(NGAYDK)
END
GO


DROP TABLE CHUYENDE
DROP TABLE NHANVIEN
DROP TABLE KHOAHOC
DROP TABLE NGUOIHOC
DROP TABLE HOCVIEN

SELECT *FROM CHUYENDE
SELECT *FROM NHANVIEN
SELECT *FROM KHOAHOC 
SELECT *FROM NGUOIHOC
SELECT *FROM HOCVIEN

